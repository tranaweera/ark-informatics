<?xml version="1.0"?>
<Schema name="Biogenix">
<!--
  == $Id: Biogenix.xml,v 1.1 2004/01/06 05:44:51 longtran Exp $
  == This software is subject to the terms of the Common Public License
  == Agreement, available at the following URL:
  == http://www.opensource.org/licenses/cpl.html.
  == Copyright (C) 2000-2003 Kana Software, Inc. and others.
  == All Rights Reserved.
  == You must accept the terms of that agreement to use this software.
  ==
  == todo:
  == 1. <CalculatedMember/>
  -->

	<Dimension name="Biospecimen types">
		<Hierarchy hasAll="true" primaryKey="BIOSPECIMENKEY">
			<Table name="ix_biospecimen"/>
			<Level name="Type" column="SAMPLETYPE" uniqueMembers="true"/>
		</Hierarchy>
	</Dimension>

<Cube name="Infection">
	<Table name="ix_consent_study" />

	<Dimension name="Patient" foreignKey="CONSENTKEY">
		<Hierarchy hasAll="true" allMemberName="All Countries" primaryKey="CONSENTKEY" primaryKeyTable="ix_consent">
			<Join leftKey="PATIENTKEY" rightKey="PATIENTKEY">
				<Table name="ix_consent"/>
				<Table name="ix_patient"/>
				
			</Join>

			<Level name="Country" table="ix_patient" column="ADDR_COUNTRY" uniqueMembers="true"/>
			<Level name="State" table="ix_patient" column="ADDR_STATE" uniqueMembers="true"/>
			<Level name="Hospital" table="ix_patient" column="HOSPITALNAME" uniqueMembers="true"/>
			<Level name="Patient ID" table="ix_patient" column="PATIENTID" uniqueMembers="true">
				<Property name="First name" table="ix_patient" column="FIRSTNAME"/>
				<Property name="Last name" table="ix_patient" column="SURNAME"/>
			</Level>
			
		</Hierarchy>
		

	</Dimension>

	<Dimension name="Infection types" foreignKey="STUDYKEY">
		<Hierarchy hasAll="true" allMemberName="All Types" primaryKey="STUDYKEY">
			<Table name="ix_study"/>

			<Level name="Type" column="STUDY_NAME" uniqueMembers="true"/>
		</Hierarchy>
		

	</Dimension>


	<Measure name="Number Infected" column="COUNTED" aggregator="count" formatString="#,###"/>
	
</Cube>

<Cube name="Biospecimen">
	<Table name="ix_biospecimen" />

	<DimensionUsage name="Biospecimen types" source="Bio_Types" foreignKey="BIOSPECIMENKEY"/>

	<Dimension name="Patient Biospecimen" foreignKey="PATIENTKEY">
		<Hierarchy hasAll="true" allMemberName="All Countries" primaryKey="PATIENTKEY">
			<Table name="ix_patient" />
			<Level name="Country" column="ADDR_COUNTRY" uniqueMembers="true"/>
			<Level name="State" column="ADDR_STATE" uniqueMembers="true"/>
			<Level name="Hospital" column="HOSPITALNAME" uniqueMembers="true"/>
			<Level name="Patient ID" column="PATIENTID" uniqueMembers="true">
				<Property name="First name" table="ix_patient" column="FIRSTNAME"/>
				<Property name="Last name" table="ix_patient" column="SURNAME"/>
			</Level>
			
		</Hierarchy>
		

	</Dimension>
	
	<Measure name="Number of bio" column="DELETED" aggregator="count" formatString="#,###"/>
	
</Cube>


</Schema>
